---
pre-commit:
  commands:
    test-terraform:
      run: terraform plan --var-file="domain.tfvars"
    packer-validate:
      run: bash -c "pushd packer || return; packer validate -var-file="../domain.hcl" .; popd || return;"
  scripts:
    "git-check":
      runner: bash

packer-validate:
  commands:
    packer-validate:
      run: bash -c "pushd packer || return; packer validate -var-file="../domain.hcl" .; popd || return;"

packer-build:
  commands:
    packer-build:
      run: bash -c "pushd packer || return; packer build -var-file="../domain.hcl" .; popd || return;"

terraform-plan:
  commands:
    terraform-plan:
      run: terraform plan --var-file="domain.tfvars"

# terraform-apply:
#   commands:
#     terraform-apply:
#       run: terraform apply --var-file="domain.tfvars"
